function buildNodeFromDefinition(n,e){var t=n[e],l={};l.name=t.name,void 0!==t.description&&null!==t.description&&(l.description=marked(t.description)),l.type=e,void 0!==t.allowExtension?l.allowExtension=t.allowExtension:l.allowExtension=!1,void 0!==t.fieldsGroup?l.fieldsGroup=t.fieldsGroup:l.fieldsGroup=!1,l.required=t.required,l.closedChildren=[];for(var a in t.fields)l.closedChildren.push(buildNodeFromField(n,t.fields[a]));return l.allowExtension&&l.closedChildren.push(buildNodeFromField(n,n["Specification Extensions"])),l}function buildNodeFromField(n,e){var t={},l=!1;if(void 0!==e.type){var a;e.type.indexOf("[")>=0?(a=e.type.substring(1,e.type.length-1),l=!0):(a=e.type,l=!1),void 0!==n[a]&&(t=buildNodeFromDefinition(n,a))}if(t.name=e.name,t.type=e.type,t.array=l,void 0!==e.description&&(t.description=marked(e.description)),void 0!==e.values)for(var r=0;r<e.values.length;r++)void 0!==e.values[r].description&&null!==e.values[r].description&&(e.values[r].description=marked(e.values[r].description));return t.required=e.required,t.gfm=e.gfm,t.patterned=e.patterned,t.values=e.values,t}function buildTree(n){var e=buildNodeFromDefinition(n,"Swagger Object");return e}function drawTree(n){function e(n){n.description&&(y.transition().duration(200).style("opacity",.9),y.html(template(n)).style("height",g+"px").style("overflow","scroll"))}function t(n){}function l(n,e,t){if(n){e(n);var a=t(n);if(a)for(var r=a.length,i=0;r>i;i++)l(a[i],e,t)}}function a(){D.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function r(n){var e=w.scale(),t=-n.y0,l=-n.x0;t=t*e+v/2,l=l*e+g/2,d3.select("g").transition().duration(m).attr("transform","translate("+t+","+l+")scale("+e+")"),w.scale(e),w.translate([t,l])}function i(n){return n.children?(n.closedChildren=n.children,n.children=null):n.closedChildren&&(n.children=n.closedChildren,n.closedChildren=null),n}function o(n){d3.event.defaultPrevented||(n=i(n),s(n),r(n))}function s(n){var l=[1],a=function(n,e){e.children&&e.children.length>0&&(l.length<=n+1&&l.push(0),l[n+1]+=e.children.length,e.children.forEach(function(e){a(n+1,e)}))};a(0,u);var r=25*d3.max(l);x=x.size([r,v]);var i=x.nodes(u).reverse(),s=x.links(i);i.forEach(function(n){n.y=n.depth*(10*d)});var c=D.selectAll("g.node").data(i,function(n){return n.id||(n.id=++h)}),f=c.enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+n.y0+","+n.x0+")"}).on("click",o).on("mouseover",function(n){e(n)}).on("mouseout",function(n){t(n)});f.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(n){return n.closedChildren?"lightsteelblue":"#fff"});f.append("text").attr("x",function(n){return n.children||n.closedChildren?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(n){return n.children||n.closedChildren?"end":"start"}).text(function(n){return n.name}).style("fill-opacity",0);f.append("circle").attr("class","ghostCircle").attr("r",30).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(n){E(n)}).on("mouseout",function(n){k(n)}),c.select("text").attr("x",function(n){return n.children||n.closedChildren?-10:10}).attr("text-anchor",function(n){return n.children||n.closedChildren?"end":"start"}).text(function(n){return n.name}),c.select("circle.nodeCircle").attr("r",4.5).style("fill",function(n){return n.closedChildren?"lightsteelblue":"#fff"});var p=c.transition().duration(m).attr("transform",function(n){return"translate("+n.y+","+n.x+")"});p.select("text").style("fill-opacity",1);var g=c.exit().transition().duration(m).attr("transform",function(e){return"translate("+n.y+","+n.x+")"}).remove();g.select("circle").attr("r",0),g.select("text").style("fill-opacity",0);var y=D.selectAll("path.link").data(s,function(n){return n.target.id});y.enter().insert("path","g").attr("class","link").attr("d",function(e){var t={x:n.x0,y:n.y0};return b({source:t,target:t})}),y.transition().duration(m).attr("d",b),y.exit().transition().duration(m).attr("d",function(e){var t={x:n.x,y:n.y};return b({source:t,target:t})}).remove(),i.forEach(function(n){n.x0=n.x,n.y0=n.y})}var u,c=0,d=0,f=null,p=null,h=0,m=750,v=$("#tree-container").width(),g=$(document).height()-$("#tree-container").position().top-50,x=($("#tree-container").position().top,$("#tree-container").position().left,d3.layout.tree().size([g,v])),y=d3.select("#tooltip-container").attr("id","node-tooltip"),b=d3.svg.diagonal().projection(function(n){return[n.y,n.x]});l(n,function(n){c++,d=Math.max(n.name.length,d)},function(n){return n.children&&n.children.length>0?n.children:null});var w=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",a),C=d3.select("#tree-container").append("svg").attr("width",v).attr("height",g).attr("class","overlay").call(w),E=function(n){f=n,S()},k=function(n){f=null,S()},S=function(){var n=[];null!==p&&null!==f&&(n=[{source:{x:f.y0,y:f.x0},target:{x:p.y0,y:p.x0}}]);var e=D.selectAll(".templink").data(n);e.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),e.attr("d",d3.svg.diagonal()),e.exit().remove()},D=C.append("g");u=n,u.x0=g/2,u.y0=0,s(u),r(u)}this.SwaggerSpecificationVisualDocumentation=this.SwaggerSpecificationVisualDocumentation||{},this.SwaggerSpecificationVisualDocumentation.tooltip=Handlebars.template({1:function(n,e,t,l,a){var r,i;return'    <i class="fa fa-indent fa-2x fa-pull-left"></i><p>'+(null!=(i=null!=(i=t.description||(null!=e?e.description:e))?i:t.helperMissing,r="function"==typeof i?i.call(null!=e?e:{},{name:"description",hash:{},data:a}):i)?r:"")+"</p>\n"},3:function(n,e,t,l,a){var r,i,o=null!=e?e:{},s=t.helperMissing,u="function";return"    <h1>"+n.escapeExpression((i=null!=(i=t.name||(null!=e?e.name:e))?i:s,typeof i===u?i.call(o,{name:"name",hash:{},data:a}):i))+'</h1>\n    <div class=".list-group">\n'+(null!=(r=t["if"].call(o,null!=e?e.required:e,{name:"if",hash:{},fn:n.program(4,a,0),inverse:n.noop,data:a}))?r:"")+(null!=(r=t["if"].call(o,null!=e?e.array:e,{name:"if",hash:{},fn:n.program(6,a,0),inverse:n.noop,data:a}))?r:"")+(null!=(r=t["if"].call(o,null!=e?e.closedChildren:e,{name:"if",hash:{},fn:n.program(8,a,0),inverse:n.program(10,a,0),data:a}))?r:"")+(null!=(r=t["if"].call(o,null!=e?e.gfm:e,{name:"if",hash:{},fn:n.program(15,a,0),inverse:n.noop,data:a}))?r:"")+(null!=(r=t["if"].call(o,null!=e?e.allowExtension:e,{name:"if",hash:{},fn:n.program(17,a,0),inverse:n.noop,data:a}))?r:"")+"  </div>\n    <h2>Description</h2>\n    <p>"+(null!=(i=null!=(i=t.description||(null!=e?e.description:e))?i:s,r=typeof i===u?i.call(o,{name:"description",hash:{},data:a}):i)?r:"")+"</p>\n\n"+(null!=(r=t["if"].call(o,null!=e?e.values:e,{name:"if",hash:{},fn:n.program(19,a,0),inverse:n.noop,data:a}))?r:"")},4:function(n,e,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-asterisk fa-fw fa-2x"></i>&nbsp;Required</p>\n'},6:function(n,e,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-list-ul fa-fw fa-2x"></i>&nbsp;Array</p>\n'},8:function(n,e,t,l,a){var r;return'      <p class=".list-group-item"><i class="fa fa-cubes fa-fw fa-2x"></i>&nbsp;'+n.escapeExpression((r=null!=(r=t.type||(null!=e?e.type:e))?r:t.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"type",hash:{},data:a}):r))+"</p>\n"},10:function(n,e,t,l,a){var r;return null!=(r=t["if"].call(null!=e?e:{},null!=e?e.children:e,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.program(13,a,0),data:a}))?r:""},11:function(n,e,t,l,a){var r;return'        <p class=".list-group-item"><i class="fa fa-cubes fa-fw fa-2x"></i>&nbsp;'+n.escapeExpression((r=null!=(r=t.type||(null!=e?e.type:e))?r:t.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"type",hash:{},data:a}):r))+"</p>\n"},13:function(n,e,t,l,a){var r;return'        <p class=".list-group-item"><i class="fa fa-cube fa-fw fa-2x"></i>&nbsp;'+n.escapeExpression((r=null!=(r=t.type||(null!=e?e.type:e))?r:t.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"type",hash:{},data:a}):r))+"</p>\n"},15:function(n,e,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-github-alt fa-fw fa-2x"></i>&nbsp;Allows GFM</p>\n'},17:function(n,e,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-code-fork fa-fw fa-2x"></i>&nbsp;Allows extension</p>\n'},19:function(n,e,t,l,a){var r,i,o,s='      <h2>Values</h2>\n      <table id="table" class="table table-striped table-bordered table-condensed table-hover" >\n        <tr>\n            <th>\n                Value\n            </th>\n            <th>\n                Default\n            </th>\n            <th>\n                Description\n            </th>\n        </tr>\n\n';return i=null!=(i=t.values||(null!=e?e.values:e))?i:t.helperMissing,o={name:"values",hash:{},fn:n.program(20,a,0),inverse:n.noop,data:a},r="function"==typeof i?i.call(null!=e?e:{},o):i,t.values||(r=t.blockHelperMissing.call(e,r,o)),null!=r&&(s+=r),s+"      </table>\n"},20:function(n,e,t,l,a){var r,i=n.lambda,o=n.escapeExpression;return"        <tr>\n          <td>"+o(i(null!=e?e.value:e,e))+"</td>\n          <td>"+o(i(null!=e?e["default"]:e,e))+"</td>\n          <td>"+(null!=(r=i(null!=e?e.description:e,e))?r:"")+"</td>\n        </tr>\n"},compiler:[7,">= 4.0.0"],main:function(n,e,t,l,a){var r;return'<div class="entry">\n'+(null!=(r=t["if"].call(null!=e?e:{},null!=e?e.fieldsGroup:e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.program(3,a,0),data:a}))?r:"")+"</div>\n"},useData:!0});var template=SwaggerSpecificationVisualDocumentation.tooltip,xmlhttp=new XMLHttpRequest,url="swagger-specification.json";xmlhttp.onreadystatechange=function(){if(4===xmlhttp.readyState&&200===xmlhttp.status){var n=JSON.parse(xmlhttp.responseText),e=buildTree(n);drawTree(e)}},xmlhttp.open("GET",url,!0),xmlhttp.send();